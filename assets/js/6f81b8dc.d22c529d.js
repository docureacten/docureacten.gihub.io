"use strict";(self.webpackChunkdocubook=self.webpackChunkdocubook||[]).push([[4567],{7909:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var i=t(4848),s=t(8453);const r={},o="Safely Using Raw HTML",a={id:"Rendering/6-4-Safely Using Raw HTML",title:"Safely Using Raw HTML",description:"When developing applications with React, there may be scenarios where you need to incorporate raw HTML directly into your components. This might be necessary when dealing with third-party content, user-generated content, or converting content from another format into HTML. However, directly injecting raw HTML can introduce significant security risks, such as Cross-Site Scripting (XSS) attacks. This section will guide you through the best practices for safely using raw HTML in React.",source:"@site/docs/6-Rendering/6-4-Safely Using Raw HTML.md",sourceDirName:"6-Rendering",slug:"/Rendering/6-4-Safely Using Raw HTML",permalink:"/Rendering/6-4-Safely Using Raw HTML",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"How to Use Keys Inside Lists",permalink:"/Rendering/6-3-How to Use Keys Inside Lists"},next:{title:"Dynamic Rendering and Conditional Rendering",permalink:"/Rendering/6-5-Dynamic Rendering and Conditional Rendering"}},c={},l=[{value:"Understanding the Danger of Raw HTML",id:"understanding-the-danger-of-raw-html",level:2},{value:"Example of Unsafe HTML Insertion",id:"example-of-unsafe-html-insertion",level:3},{value:"Safely Using <code>dangerouslySetInnerHTML</code>",id:"safely-using-dangerouslysetinnerhtml",level:2},{value:"Example of Safe HTML Insertion",id:"example-of-safe-html-insertion",level:3},{value:"Key Points to Remember",id:"key-points-to-remember",level:2},{value:"Further Reading",id:"further-reading",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"safely-using-raw-html",children:"Safely Using Raw HTML"}),"\n",(0,i.jsx)(n.p,{children:"When developing applications with React, there may be scenarios where you need to incorporate raw HTML directly into your components. This might be necessary when dealing with third-party content, user-generated content, or converting content from another format into HTML. However, directly injecting raw HTML can introduce significant security risks, such as Cross-Site Scripting (XSS) attacks. This section will guide you through the best practices for safely using raw HTML in React."}),"\n",(0,i.jsx)(n.h2,{id:"understanding-the-danger-of-raw-html",children:"Understanding the Danger of Raw HTML"}),"\n",(0,i.jsx)(n.p,{children:"Raw HTML can include any kind of content, including potentially harmful scripts. If you simply insert this HTML into your application without any sanitization, you could be opening the door for malicious attacks. For instance, a malicious user might include a script tag that performs an unwanted action when the HTML is rendered."}),"\n",(0,i.jsx)(n.h3,{id:"example-of-unsafe-html-insertion",children:"Example of Unsafe HTML Insertion"}),"\n",(0,i.jsx)(n.p,{children:"Consider the following example where raw HTML is injected directly into a component:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"function UnsafeComponent({ rawHTML }) {\n  return (\n    <div>\n      {/* Directly inserting raw HTML into the component */}\n      <div dangerouslySetInnerHTML={{ __html: rawHTML }} />\n    </div>\n  );\n}\n\n// Example usage\nconst rawHTML = \"<p>This is safe content.</p><script>alert('Hacked!');<\/script>\";\n\n<UnsafeComponent rawHTML={rawHTML} />;\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In this case, the ",(0,i.jsx)(n.code,{children:"rawHTML"})," string contains both safe content (",(0,i.jsx)(n.code,{children:"<p>This is safe content.</p>"}),") and a potentially harmful script (",(0,i.jsx)(n.code,{children:"<script>alert('Hacked!');<\/script>"}),"). When this component is rendered, the script will execute, leading to an XSS attack."]}),"\n",(0,i.jsxs)(n.h2,{id:"safely-using-dangerouslysetinnerhtml",children:["Safely Using ",(0,i.jsx)(n.code,{children:"dangerouslySetInnerHTML"})]}),"\n",(0,i.jsxs)(n.p,{children:["React provides the ",(0,i.jsx)(n.code,{children:"dangerouslySetInnerHTML"}),' attribute to allow raw HTML insertion. The "dangerous" part of the name is a clear indication that this feature should be used with extreme caution. Here\'s how to use it safely:']}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Sanitize the HTML:"})," Before inserting raw HTML, it\u2019s crucial to sanitize it. This process involves cleaning the HTML to ensure that it does not contain any executable scripts or other malicious content."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Trusted Sources:"})," Only use raw HTML from trusted sources. If you control the source of the HTML or have sanitized it properly, the risk is minimized."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Avoid Dynamic Content:"})," Whenever possible, avoid injecting HTML that comes from user input or other dynamic sources, as these are more prone to malicious manipulation."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"example-of-safe-html-insertion",children:"Example of Safe HTML Insertion"}),"\n",(0,i.jsxs)(n.p,{children:["Let's look at an example where we safely use ",(0,i.jsx)(n.code,{children:"dangerouslySetInnerHTML"})," by sanitizing the HTML:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"import DOMPurify from 'dompurify';\n\nfunction SafeComponent({ rawHTML }) {\n  // Sanitize the HTML to remove any potentially harmful content\n  const sanitizedHTML = DOMPurify.sanitize(rawHTML);\n\n  return (\n    <div>\n      {/* Safely inserting sanitized HTML into the component */}\n      <div dangerouslySetInnerHTML={{ __html: sanitizedHTML }} />\n    </div>\n  );\n}\n\n// Example usage\nconst rawHTML = \"<p>This is safe content.</p><script>alert('This will not run');<\/script>\";\n\n<SafeComponent rawHTML={rawHTML} />;\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In this example, we use the ",(0,i.jsx)(n.code,{children:"DOMPurify"})," library to sanitize the raw HTML. This ensures that any harmful content, such as the ",(0,i.jsx)(n.code,{children:"<script>"})," tag, is removed before it\u2019s inserted into the DOM. As a result, only the safe content (",(0,i.jsx)(n.code,{children:"<p>This is safe content.</p>"}),") is rendered."]}),"\n",(0,i.jsx)(n.h2,{id:"key-points-to-remember",children:"Key Points to Remember"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Always sanitize raw HTML:"})," Use libraries like ",(0,i.jsx)(n.code,{children:"DOMPurify"})," to sanitize HTML content before rendering it in your React components."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Limit the use of ",(0,i.jsx)(n.code,{children:"dangerouslySetInnerHTML"}),":"]})," Only use ",(0,i.jsx)(n.code,{children:"dangerouslySetInnerHTML"})," when absolutely necessary and after ensuring the content is safe."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Be cautious with content sources:"})," Ensure that any raw HTML comes from a trusted or sanitized source."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"DOMPurify documentation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Cross-Site Scripting (XSS) attacks"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"React security best practices"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsxs)(n.p,{children:["Injecting raw HTML into React components using ",(0,i.jsx)(n.code,{children:"dangerouslySetInnerHTML"})," can be necessary but also poses significant security risks. To mitigate these risks, always sanitize the HTML before rendering it and avoid using this method with dynamic or untrusted content. By following these practices, you can safely incorporate raw HTML into your React applications."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(6540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);